if(!this.JSON)this.JSON={};
(function(){function c(b){return 10>b?"0"+b:b}function h(b){m.lastIndex=0;return m.test(b)?'"'+b.replace(m,function(a){var e=p[a];return"string"===typeof e?e:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function f(o,a){var e,i,g,l,c=k,d,j=a[o];j&&"object"===typeof j&&"function"===typeof j.toJSON&&(j=j.toJSON(o));"function"===typeof b&&(j=b.call(a,o,j));switch(typeof j){case "string":return h(j);case "number":return isFinite(j)?""+j:"null";case "boolean":case "null":return""+j;
case "object":if(!j)return"null";k+=n;d=[];if("[object Array]"===Object.prototype.toString.apply(j)){l=j.length;for(e=0;e<l;e+=1)d[e]=f(e,j)||"null";g=0===d.length?"[]":k?"[\n"+k+d.join(",\n"+k)+"\n"+c+"]":"["+d.join(",")+"]";k=c;return g}if(b&&"object"===typeof b){l=b.length;for(e=0;e<l;e+=1)i=b[e],"string"===typeof i&&(g=f(i,j))&&d.push(h(i)+(k?": ":":")+g)}else for(i in j)Object.hasOwnProperty.call(j,i)&&(g=f(i,j))&&d.push(h(i)+(k?": ":":")+g);g=0===d.length?"{}":k?"{\n"+k+d.join(",\n"+k)+"\n"+
c+"}":"{"+d.join(",")+"}";k=c;return g}}if("function"!==typeof Date.prototype.toJSON)Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
m=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,n,p={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b;if("function"!==typeof JSON.stringify)JSON.stringify=function(d,a,e){var i;n=k="";if("number"===typeof e)for(i=0;i<e;i+=1)n+=" ";else"string"===typeof e&&(n=e);if((b=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return f("",
{"":d})};if("function"!==typeof JSON.parse)JSON.parse=function(b,a){function e(b,d){var i,c,j=b[d];if(j&&"object"===typeof j)for(i in j)Object.hasOwnProperty.call(j,i)&&(c=e(j,i),void 0!==c?j[i]=c:delete j[i]);return a.call(b,d,j)}var i,b=""+b;d.lastIndex=0;d.test(b)&&(b=b.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+b+")"),"function"===typeof a?e({"":i},""):i;throw new SyntaxError("JSON.parse");}})();
(function(c){function h(c){return c&&c.constructor===Number?c+"px":c}c.fn.bgiframe=c.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(f){var f=c.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},f),d='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+f.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==f.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==f.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
h(f.top))+";left:"+("auto"==f.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":h(f.left))+";width:"+("auto"==f.width?"expression(this.parentNode.offsetWidth+'px')":h(f.width))+";height:"+("auto"==f.height?"expression(this.parentNode.offsetHeight+'px')":h(f.height))+';"/>';return this.each(function(){0===c(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(d),this.firstChild)})}:function(){return this};c.fn.bgIframe=c.fn.bgiframe})(jQuery);
(function(c,h){function f(b,c){d.addType(b,function(a,e,i){var g,l=e,f=(new Date).getTime();if(!a){l={};i=[];e=0;try{for(a=c.length;a=c.key(e++);)if(m.test(a))g=JSON.parse(c.getItem(a)),g.expires&&g.expires<=f?i.push(a):l[a.replace(m,"")]=g.data;for(;a=i.pop();)c.removeItem(a)}catch(k){}return l}a="__amplify__"+a;if(e===h)if(g=(g=c.getItem(a))?JSON.parse(g):{expires:-1},g.expires&&g.expires<=f)c.removeItem(a);else return g.data;else if(null===e)c.removeItem(a);else{g=JSON.stringify({data:e,expires:i.expires?
f+i.expires:null});try{c.setItem(a,g)}catch(j){d[b]();try{c.setItem(a,g)}catch(n){throw d.error();}}}return l})}var d=c.store=function(b,c,a,e){e=d.type;if(a&&a.type&&a.type in d.types)e=a.type;return d.types[e](b,c,a||{})};d.types={};d.type=null;d.addType=function(b,c){if(!d.type)d.type=b;d.types[b]=c;d[b]=function(a,e,c){c=c||{};c.type=b;return d(a,e,c)}};d.error=function(){return"amplify.store quota exceeded"};var m=/^__amplify__/,k;for(k in{localStorage:1,sessionStorage:1})try{window[k].getItem&&
f(k,window[k])}catch(n){}if(window.globalStorage)try{if(f("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===d.type)d.type="globalStorage"}catch(p){}(function(){if(!d.types.localStorage){var b=document.createElement("div");b.style.display="none";document.getElementsByTagName("head")[0].appendChild(b);try{b.addBehavior("#default#userdata"),b.load("amplify")}catch(c){b.parentNode.removeChild(b);return}d.addType("userData",function(a,e,c){b.load("amplify");var g,l,f=e,
k=(new Date).getTime();if(!a){f={};l=[];for(a=0;e=b.XMLDocument.documentElement.attributes[a++];)g=JSON.parse(e.value),g.expires&&g.expires<=k?l.push(e.name):f[e.name]=g.data;for(;a=l.pop();)b.removeAttribute(a);b.save("amplify");return f}a=a.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(e===h)if(g=(e=b.getAttribute(a))?JSON.parse(e):{expires:-1},g.expires&&g.expires<=k)b.removeAttribute(a);else return g.data;else null===e?b.removeAttribute(a):
(l=b.getAttribute(a),g=JSON.stringify({data:e,expires:c.expires?k+c.expires:null}),b.setAttribute(a,g));try{b.save("amplify")}catch(j){null===l?b.removeAttribute(a):b.setAttribute(a,l);d.userData();try{b.setAttribute(a,g),b.save("amplify")}catch(m){throw null===l?b.removeAttribute(a):b.setAttribute(a,l),d.error();}}return f})}})();(function(){var b={},c={};d.addType("memory",function(a,e,d){if(!a)return b===h?h:JSON.parse(JSON.stringify(b));if(e===h)return b[a]===h?h:JSON.parse(JSON.stringify(b[a]));
c[a]&&(clearTimeout(c[a]),delete c[a]);if(null===e)return delete b[a],null;b[a]=e;d.expires&&(c[a]=setTimeout(function(){delete b[a];delete c[a]},d.expires));return e})})()})(this.amplify=this.amplify||{});
(function(c){var h=[],f=null,d=null,m=null,k=function(){var a=c(this).parent(),b=a.hasClass("tree-open"),d=a.children("ul"),g=a.data("id"),f=c.inArray(g,h);if(b){if(0<=f)b=h,g=b.slice(f+1||b.length),b.length=0>f?b.length+f:f,b.push.apply(b,g);a.removeClass("tree-open");a.addClass("tree-closed");d.slideUp()}else d.slideDown(),a.removeClass("tree-closed"),a.addClass("tree-open"),h.push(g);amplify.store("open_nodes",h)},n=function(){var a=c(this).data("id");c.ajax({url:d.replace("CMID",a),dataType:"json",
cache:!1,success:function(a){a.fail||(m.dialog("isOpen")&&m.dialog("close"),m.html(a.community_info),m.dialog("option","title",a.community_name),m.dialog("open"))}});return!1},p=function(){c(".tree-branch .tree-branch").hide();c(".tree-node").removeClass("tree-open").addClass("tree-closed");h=[];amplify.store("open_nodes",h);return!1},b=function(a,b){for(var d=c("#treecontainer").hide(),g={},f=0;f<a.length;f++)g[a[f]]=!0;c.each(a,function(a,d){var f=c("#tree-node-"+d).removeClass("tree-closed").addClass("tree-open"),
h=c("#tree-branch-"+d).show();b&&(f.parents(".tree-node").removeClass("tree-closed").addClass("tree-open").each(function(a,b){g[c(b).data("id")]=!0}),h.parents(".tree-branch").show())});a=[];c.each(g,function(b){a.push(b)});h=a;amplify.store("open_nodes",h);d.show()},o=function(){p();b(f,!0);return!1};window.init_browse=function(a,e,i){var g=!1,l=c("#tree-root");d=a;f=i;l.on("click",".community-name",n);m=c("#dialog").dialog({autoOpen:!1,minWidth:450});e&&(h=amplify.store("open_nodes"),l.on("click",
".tree-node-icon",k),!h&&h!==[]&&(f?(h=f,g=!0):h=[]),h&&b(h,g),c("#close-all-nodes").click(p),c("#reset-open-nodes").click(o))}})(jQuery);
