this.JSON||(this.JSON={});
(function(){function c(b){return 10>b?"0"+b:b}function l(b){p.lastIndex=0;return p.test(b)?'"'+b.replace(p,function(a){var d=s[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function f(r,a){var d,h,g,n,c=m,e,k=a[r];k&&"object"===typeof k&&"function"===typeof k.toJSON&&(k=k.toJSON(r));"function"===typeof b&&(k=b.call(a,r,k));switch(typeof k){case "string":return l(k);case "number":return isFinite(k)?String(k):"null";case "boolean":case "null":return String(k);case "object":if(!k)return"null";
m+=q;e=[];if("[object Array]"===Object.prototype.toString.apply(k)){n=k.length;for(d=0;d<n;d+=1)e[d]=f(d,k)||"null";g=0===e.length?"[]":m?"[\n"+m+e.join(",\n"+m)+"\n"+c+"]":"["+e.join(",")+"]";m=c;return g}if(b&&"object"===typeof b)for(n=b.length,d=0;d<n;d+=1)h=b[d],"string"===typeof h&&(g=f(h,k))&&e.push(l(h)+(m?": ":":")+g);else for(h in k)Object.hasOwnProperty.call(k,h)&&(g=f(h,k))&&e.push(l(h)+(m?": ":":")+g);g=0===e.length?"{}":m?"{\n"+m+e.join(",\n"+m)+"\n"+c+"}":"{"+e.join(",")+"}";m=c;return g}}
"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m,q,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b;"function"!==typeof JSON.stringify&&(JSON.stringify=function(e,a,d){var h;q=m="";if("number"===typeof d)for(h=0;h<d;h+=1)q+=" ";else"string"===typeof d&&(q=d);if((b=a)&&"function"!==typeof a&&("object"!==typeof a||"number"!==typeof a.length))throw Error("JSON.stringify");return f("",{"":e})});
"function"!==typeof JSON.parse&&(JSON.parse=function(b,a){function d(b,e){var h,c,k=b[e];if(k&&"object"===typeof k)for(h in k)Object.hasOwnProperty.call(k,h)&&(c=d(k,h),void 0!==c?k[h]=c:delete k[h]);return a.call(b,e,k)}var h;b=String(b);e.lastIndex=0;e.test(b)&&(b=b.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return h=eval("("+b+")"),"function"===typeof a?d({"":h},""):h;throw new SyntaxError("JSON.parse");})})();
(function(c){function l(c){return c&&c.constructor===Number?c+"px":c}c.fn.bgiframe=c.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(f){f=c.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},f);var e='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+f.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==f.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==f.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
l(f.top))+";left:"+("auto"==f.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":l(f.left))+";width:"+("auto"==f.width?"expression(this.parentNode.offsetWidth+'px')":l(f.width))+";height:"+("auto"==f.height?"expression(this.parentNode.offsetHeight+'px')":l(f.height))+';"/>';return this.each(function(){0===c(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(e),this.firstChild)})}:function(){return this};c.fn.bgIframe=c.fn.bgiframe})(jQuery);
(function(c,l){function f(b,c){e.addType(b,function(a,d,h){var g,n=d,f=(new Date).getTime();if(!a){n={};h=[];d=0;try{for(a=c.length;a=c.key(d++);)p.test(a)&&(g=JSON.parse(c.getItem(a)),g.expires&&g.expires<=f?h.push(a):n[a.replace(p,"")]=g.data);for(;a=h.pop();)c.removeItem(a)}catch(m){}return n}a="__amplify__"+a;if(d===l)if(g=(g=c.getItem(a))?JSON.parse(g):{expires:-1},g.expires&&g.expires<=f)c.removeItem(a);else return g.data;else if(null===d)c.removeItem(a);else{g=JSON.stringify({data:d,expires:h.expires?
f+h.expires:null});try{c.setItem(a,g)}catch(k){e[b]();try{c.setItem(a,g)}catch(q){throw e.error();}}}return n})}var e=c.store=function(b,c,a,d){d=e.type;a&&a.type&&a.type in e.types&&(d=a.type);return e.types[d](b,c,a||{})};e.types={};e.type=null;e.addType=function(b,c){e.type||(e.type=b);e.types[b]=c;e[b]=function(a,d,c){c=c||{};c.type=b;return e(a,d,c)}};e.error=function(){return"amplify.store quota exceeded"};var p=/^__amplify__/,m;for(m in{localStorage:1,sessionStorage:1})try{window[m].getItem&&
f(m,window[m])}catch(q){}if(window.globalStorage)try{f("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===e.type&&(e.type="globalStorage")}catch(s){}(function(){if(!e.types.localStorage){var b=document.createElement("div");b.style.display="none";document.getElementsByTagName("head")[0].appendChild(b);try{b.addBehavior("#default#userdata"),b.load("amplify")}catch(c){b.parentNode.removeChild(b);return}e.addType("userData",function(a,d,c){b.load("amplify");var g,n,f=d,
m=(new Date).getTime();if(!a){f={};n=[];for(a=0;d=b.XMLDocument.documentElement.attributes[a++];)g=JSON.parse(d.value),g.expires&&g.expires<=m?n.push(d.name):f[d.name]=g.data;for(;a=n.pop();)b.removeAttribute(a);b.save("amplify");return f}a=a.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");if(d===l)if(g=(d=b.getAttribute(a))?JSON.parse(d):{expires:-1},g.expires&&g.expires<=m)b.removeAttribute(a);else return g.data;else null===d?b.removeAttribute(a):
(n=b.getAttribute(a),g=JSON.stringify({data:d,expires:c.expires?m+c.expires:null}),b.setAttribute(a,g));try{b.save("amplify")}catch(k){null===n?b.removeAttribute(a):b.setAttribute(a,n);e.userData();try{b.setAttribute(a,g),b.save("amplify")}catch(p){throw null===n?b.removeAttribute(a):b.setAttribute(a,n),e.error();}}return f})}})();(function(){function c(a){return a===l?l:JSON.parse(JSON.stringify(a))}var f={},a={};e.addType("memory",function(d,e,g){if(!d)return c(f);if(e===l)return c(f[d]);a[d]&&
(clearTimeout(a[d]),delete a[d]);if(null===e)return delete f[d],null;f[d]=e;g.expires&&(a[d]=setTimeout(function(){delete f[d];delete a[d]},g.expires));return e})})()})(this.amplify=this.amplify||{});
(function(c){var l=[],f=null,e=null,p=null,m=function(a){a=c(this).parent();var d=a.hasClass("tree-open"),b=a.children("ul"),e=a.data("id"),f=c.inArray(e,l);d?(0<=f&&(d=l,e=d.slice(f+1||d.length),d.length=0>f?d.length+f:f,d.push.apply(d,e)),a.removeClass("tree-open"),a.addClass("tree-closed"),b.slideUp()):(b.slideDown(),a.removeClass("tree-closed"),a.addClass("tree-open"),l.push(e));amplify.store("open_nodes",l)},q=function(a){a=c(this).data("id");c.ajax({url:e.replace("CMID",a),dataType:"json",cache:!1,
success:function(a){a.fail||(p.dialog("isOpen")&&p.dialog("close"),p.html(a.community_info),p.dialog("option","title",a.community_name),p.dialog("open"))}});return!1},s=function(a){c(".tree-branch .tree-branch").hide();c(".tree-node").removeClass("tree-open").addClass("tree-closed");l=[];amplify.store("open_nodes",l);return!1},b=function(a,d){for(var b=c("#treecontainer").hide(),e={},f=0;f<a.length;f++)e[a[f]]=!0;c.each(a,function(a,b){var f=c("#tree-node-"+b).removeClass("tree-closed").addClass("tree-open"),
h=c("#tree-branch-"+b).show();d&&(f.parents(".tree-node").removeClass("tree-closed").addClass("tree-open").each(function(a,b){e[c(b).data("id")]=!0}),h.parents(".tree-branch").show())});a=[];c.each(e,function(b,c){a.push(b)});l=a;amplify.store("open_nodes",l);b.show()},r=function(a){s();b(f,!0);return!1};window.init_browse=function(a,d,h){var g=!1,n=c("#tree-root");e=a;f=h;n.on("click",".community-name",q);p=c("#dialog").dialog({autoOpen:!1,minWidth:450});d&&(l=amplify.store("open_nodes"),n.on("click",
".tree-node-icon",m),l||l===[]||(f?(l=f,g=!0):l=[]),l&&b(l,g),c("#close-all-nodes").click(s),c("#reset-open-nodes").click(r))}})(jQuery);
